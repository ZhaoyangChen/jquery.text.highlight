/*!
 * jquery.text.highlight v1.0.0
 * Copyright 2016 Itay Grudev
 * Licensed under the MIT license
 */
(function(c){function g(a,b,d){this.element=a;this.options=c.extend({},{element:"mark","class":"",caseSensitive:!1},d);this.b(b)}g.prototype.b=function(a){if(a instanceof RegExp||"string"==typeof a)this.a(a,this.element);else if("array"==typeof a||"object"==typeof a&&a.length)for(var b=0;b<a.length;++b)this.a(a[b],this.element)};g.prototype.a=function(a,b){if(b.nodeType==Node.TEXT_NODE){var d=null,f;if(a instanceof RegExp){if(a.ignoreCase==this.options.caseSensitive){var e=this.options.caseSensitive?
"":"i",e=a.flags.replace("i","")+e;a=new RegExp(a.source,e)}e=a.exec(b.data);null!==e&&(d=e.index,f=e[0].length)}else"string"==typeof a&&(d=this.options.caseSensitive?b.data.indexOf(a):b.data.toUpperCase().indexOf(a.toUpperCase()),f=a.length);if(null!==d&&0<d)return e=document.createElement(this.options.element),e.className=this.options["class"],c(e).attr("data-text-highlight",""),d=b.splitText(d),d.splitText(f),f=d.cloneNode(!0),e.appendChild(f),d.parentNode.replaceChild(e,d),1}else if(b.nodeType==
Node.ELEMENT_NODE&&b.childNodes&&!/(script|style)/i.test(b.tagName))for(f=0;f<b.childNodes.length;++f)f+=this.a(a,b.childNodes[f]);return 0};g.prototype.remove=function(){c(this.element).find("[data-text-highlight]").each(function(){this.parentNode.replaceChild(this.firstChild,this)});this.element.normalize()};c.fn.textHighlight=function(a,b){return this.each(function(){c.data(this,"plugin_textHighlight")&&(c.data(this,"plugin_textHighlight").remove(),c.removeData(this,"plugin_textHighlight"));c.data(this,
"plugin_textHighlight",new g(this,a,b))})};c.fn.removeHighlight=function(){return this.each(function(){if(!c.data(this,"plugin_textHighlight"))return console.error("Cannot call removeHighlight on element that was not intialised from textHighlight.");c.data(this,"plugin_textHighlight").remove();c.removeData(this,"plugin_textHighlight")})}})(jQuery);
